# 
# CHRONO EXAMPLES
#
# Makefile for building Chrono examples with Irrlicht 3D realtime preview
#
# This makefile must be used with the 'nmake' tool (it comes with 
# most Microsoft Visual C++ distributions), for example open a 
# command-line console, cd into this directory and and type:
#
#    nmake -f makefile
#
# Note that you must have compiler and linker correctly
# installed, and you should have edited the config.mak file
# as necessary (see in directory chrono/makes/)
# 


include ../../makes/config.mak


	# From now on, thank to config.mak, some useful variables
	# have been automatically set. Most important are:
	#   CH_CHRONODIR (the directory of Chrono sdk)
	#   CH_LIBRARIES (the Chrono API libraries to be linked), 
	#   CH_INCLUDES (directories of header files, needed by compiler), 
	#   CH_LINKEXEFLAGS (needed flags for linker, to make executables),
	#   CH_COMPILERFLAGS (needed flags for the compiler), 
	#   CH_COMPILERFLAG_FILEOUT (flag to set compiler output compiler,ex.=-Fo for MSVC)
	#   CC (the command to invoke the compiler,
	#   LD (the command to invoke the linker). 
	# Then, from now on, you can use them in your makefile,
	# as in the example below.

             

##############

CPPFILE_DEMO_COLLISION = \
	demo_collision.cpp 

CPPFILE_DEMO_BENCHMARK = \
	demo_benchmark.cpp 

CPPFILE_DEMO_CRANK = \
	demo_crank.cpp 
	
CPPFILE_DEMO_FOURBAR = \
	demo_fourbar.cpp 

CPPFILE_DEMO_PENDULUM = \
	demo_pendulum.cpp 
	
CPPFILE_DEMO_BRICKS = \
	demo_bricks.cpp 

CPPFILE_DEMO_SUSPENSION = \
	demo_suspension.cpp 

CPPFILE_DEMO_GEARS = \
	demo_gears.cpp 

CPPFILE_DEMO_MECANUM = \
	demo_mecanum.cpp 
	
CPPFILE_DEMO_TRACKS = \
	demo_tracks.cpp 

CPPFILE_DEMO_FRICTION = \
	demo_friction.cpp 
	
CPPFILE_DEMO_FORKLIFT = \
	demo_forklift.cpp 

CPPFILE_DEMO_TIRE = \
	demo_tire.cpp 	
		
CPPFILE_DEMO_DECOMPOSITION = \
	demo_decomposition.cpp 
	
CPPFILE_DEMO_MESHLESS = \
	demo_meshless.cpp 			

CPPFILE_DEMO_SPH = \
	demo_sph.cpp 	
	
OFILE_DEMO_TRACKS=$(CPPFILE_DEMO_TRACKS:.cpp=.o)	
OFILE_DEMO_COLLISION=$(CPPFILE_DEMO_COLLISION:.cpp=.o) 
OFILE_DEMO_BENCHMARK=$(CPPFILE_DEMO_BENCHMARK:.cpp=.o) 
OFILE_DEMO_CRANK=$(CPPFILE_DEMO_CRANK:.cpp=.o) 
OFILE_DEMO_FOURBAR=$(CPPFILE_DEMO_FOURBAR:.cpp=.o)
OFILE_DEMO_PENDULUM=$(CPPFILE_DEMO_PENDULUM:.cpp=.o)
OFILE_DEMO_BRICKS=$(CPPFILE_DEMO_BRICKS:.cpp=.o)
OFILE_DEMO_SUSPENSION=$(CPPFILE_DEMO_SUSPENSION:.cpp=.o)
OFILE_DEMO_GEARS=$(CPPFILE_DEMO_GEARS:.cpp=.o)
OFILE_DEMO_MECANUM=$(CPPFILE_DEMO_MECANUM:.cpp=.o)
OFILE_DEMO_FRICTION=$(CPPFILE_DEMO_FRICTION:.cpp=.o)
OFILE_DEMO_FORKLIFT=$(CPPFILE_DEMO_FORKLIFT:.cpp=.o)
OFILE_DEMO_TIRE=$(CPPFILE_DEMO_TIRE:.cpp=.o)
OFILE_DEMO_DECOMPOSITION=$(CPPFILE_DEMO_DECOMPOSITION:.cpp=.o)
OFILE_DEMO_MESHLESS=$(CPPFILE_DEMO_MESHLESS:.cpp=.o)
OFILE_DEMO_SPH=$(CPPFILE_DEMO_SPH:.cpp=.o)

BINFILE_DEMO_TRACKS="$(CH_BINDIR)$(D)$(CPPFILE_DEMO_TRACKS:.cpp=.exe)"
BINFILE_DEMO_COLLISION="$(CH_BINDIR)$(D)$(CPPFILE_DEMO_COLLISION:.cpp=.exe)"
BINFILE_DEMO_BENCHMARK="$(CH_BINDIR)$(D)$(CPPFILE_DEMO_BENCHMARK:.cpp=.exe)"
BINFILE_DEMO_CRANK="$(CH_BINDIR)$(D)$(CPPFILE_DEMO_CRANK:.cpp=.exe)"
BINFILE_DEMO_FOURBAR="$(CH_BINDIR)$(D)$(CPPFILE_DEMO_FOURBAR:.cpp=.exe)"
BINFILE_DEMO_PENDULUM="$(CH_BINDIR)$(D)$(CPPFILE_DEMO_PENDULUM:.cpp=.exe)"
BINFILE_DEMO_BRICKS="$(CH_BINDIR)$(D)$(CPPFILE_DEMO_BRICKS:.cpp=.exe)"
BINFILE_DEMO_SUSPENSION="$(CH_BINDIR)$(D)$(CPPFILE_DEMO_SUSPENSION:.cpp=.exe)"
BINFILE_DEMO_GEARS="$(CH_BINDIR)$(D)$(CPPFILE_DEMO_GEARS:.cpp=.exe)"
BINFILE_DEMO_MECANUM="$(CH_BINDIR)$(D)$(CPPFILE_DEMO_MECANUM:.cpp=.exe)"
BINFILE_DEMO_FRICTION="$(CH_BINDIR)$(D)$(CPPFILE_DEMO_FRICTION:.cpp=.exe)"
BINFILE_DEMO_FORKLIFT="$(CH_BINDIR)$(D)$(CPPFILE_DEMO_FORKLIFT:.cpp=.exe)"
BINFILE_DEMO_TIRE="$(CH_BINDIR)$(D)$(CPPFILE_DEMO_TIRE:.cpp=.exe)"
BINFILE_DEMO_DECOMPOSITION="$(CH_BINDIR)$(D)$(CPPFILE_DEMO_DECOMPOSITION:.cpp=.exe)"
BINFILE_DEMO_MESHLESS="$(CH_BINDIR)$(D)$(CPPFILE_DEMO_MESHLESS:.cpp=.exe)"
BINFILE_DEMO_SPH="$(CH_BINDIR)$(D)$(CPPFILE_DEMO_SPH:.cpp=.exe)"

.SUFFIXES:
.SUFFIXES: .cpp .c .o

.cpp.o:
	$(CC) $(CH_COMPILERFLAGS) $(CH_INCLUDES) -c $< $(CH_COMPILERFLAG_FILEOUT)"$*.o"

     
$(BINFILE_DEMO_COLLISION): $(OFILE_DEMO_COLLISION)
	$(LD) $(CH_LINKEXEFLAGS) $(OFILE_DEMO_COLLISION) $(CH_LIBRARIES) $(CH_IRRLICHTLIB) $(CH_LINKERFLAG_FILEOUT)$(BINFILE_DEMO_COLLISION)
	$(MT) -manifest $(BINFILE_DEMO_COLLISION).manifest -outputresource:$(BINFILE_DEMO_COLLISION);#1 $(S)\
	$(DEL) $(BINFILE_DEMO_COLLISION).manifest
	
$(BINFILE_DEMO_TRACKS):    $(OFILE_DEMO_TRACKS)
	$(LD) $(CH_LINKEXEFLAGS) $(OFILE_DEMO_TRACKS) $(CH_LIBRARIES) $(CH_IRRLICHTLIB) $(CH_LINKERFLAG_FILEOUT)$(BINFILE_DEMO_TRACKS)
	$(MT) -manifest $(BINFILE_DEMO_TRACKS).manifest -outputresource:$(BINFILE_DEMO_TRACKS);#1 $(S)\
	$(DEL) $(BINFILE_DEMO_TRACKS).manifest
	
$(BINFILE_DEMO_BENCHMARK): $(OFILE_DEMO_BENCHMARK)
	$(LD) $(CH_LINKEXEFLAGS) $(OFILE_DEMO_BENCHMARK) $(CH_LIBRARIES) $(CH_IRRLICHTLIB) $(CH_LINKERFLAG_FILEOUT)$(BINFILE_DEMO_BENCHMARK)
	$(MT) -manifest $(BINFILE_DEMO_BENCHMARK).manifest -outputresource:$(BINFILE_DEMO_BENCHMARK);#1  $(S)\
	$(DEL) $(BINFILE_DEMO_BENCHMARK).manifest
	
$(BINFILE_DEMO_CRANK):     $(OFILE_DEMO_CRANK)
	$(LD) $(CH_LINKEXEFLAGS) $(OFILE_DEMO_CRANK) $(CH_LIBRARIES) $(CH_IRRLICHTLIB) $(CH_LINKERFLAG_FILEOUT)$(BINFILE_DEMO_CRANK)
	$(MT) -manifest $(BINFILE_DEMO_CRANK).manifest -outputresource:$(BINFILE_DEMO_CRANK);#1  $(S)\
	$(DEL) $(BINFILE_DEMO_CRANK).manifest
	
$(BINFILE_DEMO_FOURBAR):   $(OFILE_DEMO_FOURBAR)
	$(LD) $(CH_LINKEXEFLAGS) $(OFILE_DEMO_FOURBAR) $(CH_LIBRARIES) $(CH_IRRLICHTLIB) $(CH_LINKERFLAG_FILEOUT)$(BINFILE_DEMO_FOURBAR)
	$(MT) -manifest $(BINFILE_DEMO_FOURBAR).manifest -outputresource:$(BINFILE_DEMO_FOURBAR);#1 $(S)\
	$(DEL) $(BINFILE_DEMO_FOURBAR).manifest
	
$(BINFILE_DEMO_PENDULUM):  $(OFILE_DEMO_PENDULUM)
	$(LD) $(CH_LINKEXEFLAGS) $(OFILE_DEMO_PENDULUM) $(CH_LIBRARIES) $(CH_IRRLICHTLIB) $(CH_LINKERFLAG_FILEOUT)$(BINFILE_DEMO_PENDULUM)
	$(MT) -manifest $(BINFILE_DEMO_PENDULUM).manifest -outputresource:$(BINFILE_DEMO_PENDULUM);#1 $(S)\
	$(DEL) $(BINFILE_DEMO_PENDULUM).manifest
	
$(BINFILE_DEMO_BRICKS):    $(OFILE_DEMO_BRICKS)
	$(LD) $(CH_LINKEXEFLAGS) $(OFILE_DEMO_BRICKS) $(CH_LIBRARIES) $(CH_IRRLICHTLIB) $(CH_LINKERFLAG_FILEOUT)$(BINFILE_DEMO_BRICKS)
	$(MT) -manifest $(BINFILE_DEMO_BRICKS).manifest -outputresource:$(BINFILE_DEMO_BRICKS);#1 $(S)\
	$(DEL) $(BINFILE_DEMO_BRICKS).manifest	
	
$(BINFILE_DEMO_SUSPENSION):  $(OFILE_DEMO_SUSPENSION)
	$(LD) $(CH_LINKEXEFLAGS) $(OFILE_DEMO_SUSPENSION) $(CH_LIBRARIES) $(CH_IRRLICHTLIB) $(CH_LINKERFLAG_FILEOUT)$(BINFILE_DEMO_SUSPENSION)
	$(MT) -manifest $(BINFILE_DEMO_SUSPENSION).manifest -outputresource:$(BINFILE_DEMO_SUSPENSION);#1  $(S)\
	$(DEL) $(BINFILE_DEMO_SUSPENSION).manifest	
	
$(BINFILE_DEMO_GEARS):     $(OFILE_DEMO_GEARS)     
	$(LD) $(CH_LINKEXEFLAGS) $(OFILE_DEMO_GEARS) $(CH_LIBRARIES) $(CH_IRRLICHTLIB) $(CH_LINKERFLAG_FILEOUT)$(BINFILE_DEMO_GEARS)
	$(MT) -manifest $(BINFILE_DEMO_GEARS).manifest -outputresource:$(BINFILE_DEMO_GEARS);#1 $(S)\
	$(DEL) $(BINFILE_DEMO_GEARS).manifest
	
$(BINFILE_DEMO_MECANUM):   $(OFILE_DEMO_MECANUM)
	$(LD) $(CH_LINKEXEFLAGS) $(OFILE_DEMO_MECANUM) $(CH_LIBRARIES) $(CH_IRRLICHTLIB) $(CH_LINKERFLAG_FILEOUT)$(BINFILE_DEMO_MECANUM)
	$(MT) -manifest $(BINFILE_DEMO_MECANUM).manifest -outputresource:$(BINFILE_DEMO_MECANUM);#1  $(S)\
	$(DEL) $(BINFILE_DEMO_MECANUM).manifest	
	
$(BINFILE_DEMO_FRICTION):   $(OFILE_DEMO_FRICTION)
	$(LD) $(CH_LINKEXEFLAGS) $(OFILE_DEMO_FRICTION) $(CH_LIBRARIES) $(CH_IRRLICHTLIB) $(CH_LINKERFLAG_FILEOUT)$(BINFILE_DEMO_FRICTION)
	$(MT) -manifest $(BINFILE_DEMO_FRICTION).manifest -outputresource:$(BINFILE_DEMO_FRICTION);#1  $(S)\
	$(DEL) $(BINFILE_DEMO_FRICTION).manifest	

$(BINFILE_DEMO_FORKLIFT):   $(OFILE_DEMO_FORKLIFT)
	$(LD) $(CH_LINKEXEFLAGS) $(OFILE_DEMO_FORKLIFT) $(CH_LIBRARIES) $(CH_IRRLICHTLIB) $(CH_LINKERFLAG_FILEOUT)$(BINFILE_DEMO_FORKLIFT)
	$(MT) -manifest $(BINFILE_DEMO_FORKLIFT).manifest -outputresource:$(BINFILE_DEMO_FORKLIFT);#1  $(S)\
	$(DEL) $(BINFILE_DEMO_FORKLIFT).manifest

$(BINFILE_DEMO_TIRE):   $(OFILE_DEMO_TIRE)
	$(LD) $(CH_LINKEXEFLAGS) $(OFILE_DEMO_TIRE) $(CH_LIBRARIES) $(CH_IRRLICHTLIB) $(CH_LINKERFLAG_FILEOUT)$(BINFILE_DEMO_TIRE)
	$(MT) -manifest $(BINFILE_DEMO_TIRE).manifest -outputresource:$(BINFILE_DEMO_TIRE);#1  $(S)\
	$(DEL) $(BINFILE_DEMO_TIRE).manifest
		
$(BINFILE_DEMO_DECOMPOSITION):   $(OFILE_DEMO_DECOMPOSITION)
	$(LD) $(CH_LINKEXEFLAGS) $(OFILE_DEMO_DECOMPOSITION) $(CH_LIBRARIES) $(CH_IRRLICHTLIB) $(CH_LINKERFLAG_FILEOUT)$(BINFILE_DEMO_DECOMPOSITION)
	$(MT) -manifest $(BINFILE_DEMO_DECOMPOSITION).manifest -outputresource:$(BINFILE_DEMO_DECOMPOSITION);#1  $(S)\
	$(DEL) $(BINFILE_DEMO_DECOMPOSITION).manifest	

$(BINFILE_DEMO_MESHLESS):   $(OFILE_DEMO_MESHLESS)
	$(LD) $(CH_LINKEXEFLAGS) $(OFILE_DEMO_MESHLESS) $(CH_LIBRARIES) $(CH_IRRLICHTLIB) $(CH_LINKERFLAG_FILEOUT)$(BINFILE_DEMO_MESHLESS)
	$(MT) -manifest $(BINFILE_DEMO_MESHLESS).manifest -outputresource:$(BINFILE_DEMO_MESHLESS);#1  $(S)\
	$(DEL) $(BINFILE_DEMO_MESHLESS).manifest	

$(BINFILE_DEMO_SPH):   $(OFILE_DEMO_SPH)
	$(LD) $(CH_LINKEXEFLAGS) $(OFILE_DEMO_SPH) $(CH_LIBRARIES) $(CH_IRRLICHTLIB) $(CH_LINKERFLAG_FILEOUT)$(BINFILE_DEMO_SPH)
	$(MT) -manifest $(BINFILE_DEMO_SPH).manifest -outputresource:$(BINFILE_DEMO_SPH);#1  $(S)\
	$(DEL) $(BINFILE_DEMO_SPH).manifest	
		

all: $(BINFILE_DEMO_BRICKS) \
     $(BINFILE_DEMO_PENDULUM) \
     $(BINFILE_DEMO_FOURBAR) \
     $(BINFILE_DEMO_CRANK) \
     $(BINFILE_DEMO_COLLISION) \
     $(BINFILE_DEMO_BENCHMARK) \
     $(BINFILE_DEMO_SUSPENSION) \
     $(BINFILE_DEMO_GEARS) \
     $(BINFILE_DEMO_MECANUM) \
     $(BINFILE_DEMO_TRACKS) \
     $(BINFILE_DEMO_FRICTION) \
     $(BINFILE_DEMO_FORKLIFT) \
     $(BINFILE_DEMO_TIRE) \
     $(BINFILE_DEMO_DECOMPOSITION) \
     $(BINFILE_DEMO_MESHLESS) \
     $(BINFILE_DEMO_SPH)

purge:
	-@$(DEL) -f .*~ *~ #*

clean:
	-@$(DEL) $(OFILE_DEMO_BRICKS) \
	       $(OFILE_DEMO_PENDULUM) \
	       $(OFILE_DEMO_FOURBAR) \
	       $(OFILE_DEMO_TRACKS) \
	       $(OFILE_DEMO_CRANK) \
	       $(OFILE_DEMO_COLLISION) \
	       $(OFILE_DEMO_BENCHMARK) \
	       $(OFILE_DEMO_SUSPENSION) \
	       $(OFILE_DEMO_GEARS) \
	       $(OFILE_DEMO_MECANUM) \
	       $(OFILE_DEMO_TRACKS) \
	       $(OFILE_DEMO_FRICTION) \
	       $(OFILE_DEMO_FORKLIFT) \
	       $(OFILE_DEMO_TIRE) \
	       $(OFILE_DEMO_DECOMPOSITION) \
	       $(OFILE_DEMO_MESHLESS) \
	       $(OFILE_DEMO_SPH)

	-@$(DEL) $(BINFILE_DEMO_COLLISION) \
		$(BINFILE_DEMO_BENCHMARK) \
		$(BINFILE_DEMO_CRANK) \
		$(BINFILE_DEMO_FOURBAR) \
		$(BINFILE_DEMO_TRACKS) \
		$(BINFILE_DEMO_PENDULUM) \
		$(BINFILE_DEMO_BRICKS) \
		$(BINFILE_DEMO_SUSPENSION) \
		$(BINFILE_DEMO_GEARS) \
		$(BINFILE_DEMO_MECANUM) \
		$(BINFILE_DEMO_TRACKS) \
		$(BINFILE_DEMO_FRICTION) \
		$(BINFILE_DEMO_FORKLIFT) \
		$(BINFILE_DEMO_TIRE) \
		$(BINFILE_DEMO_DECOMPOSITION) \
		$(BINFILE_DEMO_MESHLESS) \
		$(BINFILE_DEMO_SPH) 
