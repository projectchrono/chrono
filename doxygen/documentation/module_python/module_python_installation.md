Install the PYTHON module {#module_python_installation}
==========================

[TOC]

This is an optional module that adds Python support in Chrono::Engine.
 
Read [the introduction to modules](@ref modules) for a technical background 
on the modularity of the Chrono::Engine project.


##Features

The **PYTHON module** allows users to use the the famous [Python](http://www.python.org)  
language for creating simulations, with the typical advantages of scripting languages 
(immediate execution, no compilers, ease of use, etc.). 

This modules, in particular, is used to build the [Chrono::PyEngine](@ref introduction_chrono_pyengine) wrapper.

This module consists of *two* main sets of build targets:

- The Python modules for [Chrono::PyEngine](@ref introduction_chrono_pyengine). 
  Currently, the PyChrono::Engine Python modules that are built are:
	- *ChronoEngine_PYTHON_core*, that wraps all the core Chrono::Engine,
	- *ChronoEngine_PYTHON_postprocess*, that wraps the POSTPROCESS module.
	- *ChronoEngine_PYTHON_irrlicht*, that wraps the IRRLICHT module.
	- *ChronoEngine_PYTHON_fea*, that wraps the FEA module.

- A *PYPARSER module* is built, that is a c++ module for parsing / executing / interpreting 
  Python instructions from C++ programs.

  
## Requirements

- To **run** applications based on this module:
	- you must have [Python](http://www.python.org) installed.
- To **build** this module:
	- you must have [Python](http://www.python.org) installed,
	- you must have [Swig](http://www.swig.org/) wrapper generator installed.


## Building instructions

1. Install SWIG on your system. (If needed, add its directory to your PATH so that swig.exe 
   can be run from the shell).

2. Repeat the instructions for the [full installation](@ref tutorial_install_chrono), but when you see 
   the CMake window, you must add the following steps:

3. Set the <tt>ENABLE_MODULE_PYTHON</tt> as 'on', then press 'Configure' (to refresh the variable list) 

4. Set the <tt>CH_PYTHONDIR</tt> variable to the directory where you have your copy of Python. 
   For example, it could be <tt>C:/Python33</tt>

5. When you pressed 'Configure', CMake should have detected your SWIG tools: 
   this should create two variables in CMake called <tt>SWIG_DIR</tt> and <tt>SWIG_EXECUTABLE</tt>. 
   If all is fine, they should automatically contain meaningful values, 
   for example <tt>C:/swigwin-2.0.4/Lib</tt> and <tt>C:/swigwin-2.0.4/swig.exe</tt> , 
   so you do not need to touch them.

6. Press 'Configure' again, then 'Generate', and proceed as usual in the installation instructions.


Read the notes below for details and troubleshooting related to compilation of this module.

After the successful compilation, the [Chrono::PyEngine](@ref introduction_chrono_pyengine) modules 
are built and installed in your Python environment, so you will be able to open a 
Python editor and to type Python commands that call Chrono::Engine functions.

See the [introduction to Python scripting](@ref chrono_pyengine_reference) 
to see how to use [Chrono::PyEngine](@ref introduction_chrono_pyengine).


## Notes

For your knowledge, the build process of the Python modules, as generated by CMake, 
internally consists of these automatic steps: 

- SWIG preprocesses many C++ source code files in order to generate a .cxx 
  wrapper file that contains the code for accessing C++ functions through the 
  API, and some .py files

- the C++ compiler compiles the .cxx file and generates one or more dll, 

- these dll are copied into the /DLLs directory of your Python distribution, but
  their .dll suffix will be changed to .pyd; those files represent the Python modules,

- other required dll such as ChronoEngine.dll are copied in the /DLLs directory, with .dll suffix.

- auxiliary .py files will be placed in the /Lib directory of your Python distribution.


<div class="ce-info">
Note that the SWIG tool requires few minutes to process the source 
and to generate the .cxx wrapper file; 
this means that when you start the compilation of the entire 
Chrono::Engine project, the process might look 'frozen' 
for one or two minutes when SWIG does its job; just have patience and wait. 
</div>

<div class="ce-info">
This module is tested with Python 3.3 and 3.2. 
Support of the previous version Python 2.7 is discontinued.  
</div>

<div class="ce-warning">
Important! if you installed Python for 32 bit, you must compile 
Chrono::Engine in 32 bit mode; vice-versa if you installed 
Python for 64bit, you must compile Chrono::Engine in 64 bit mode. 
(this is because a 32 bit program cannot call functions in a 64 bit dll, and vice-versa).
</div>


<div class="ce-warning">
In some distributions of Python, the debug library 'python33_d.lib' (the debug version of the python33.lib library) is not included by default. If you need it because you recompile the python module in debug mode, either you recompile the entire Python source, or you modify pyconfig.h to force the use of python33.lib anyway, doing this way:
<br>
1. Comment out the line:
	<br>
    <tt>
	//#define Py_DEBUG
	</tt>
2. Modify 
	<tt>
	#if defined(_DEBUG)
	  #pragma comment(lib,"python33_d.lib")
	</tt>
	<br>
	into
	<br>
	<tt>
	#if defined(_DEBUG)
	  #pragma comment(lib,"python33.lib")
	</tt>
3. Press 'Advanced' in CMake, set the PYTHON_DEBUG_LIBRARY to the same lib that you have in PYTHON_LIBRARY, and press 'Generate' so that your project will link 'python33.lib' instead than 'python33_d.lib'.
</div>

---

## How to use it
- C++ functions (as Python parser)

	- Look at the [API section](group__python__module.html) of this module for documentation about C++ functions.

	- Look at the C++ source of [demos](@ref tutorial_root) to learn how to use the C++ functions of this module.

- Python functions (as [Chrono::PyEngine](@ref introduction_chrono_pyengine) )

	- Look at the [reference](@ref chrono_pyengine_reference) of Chrono::PyEngine to learn how to use Python to control Chrono.

	- Look at the Python source of [demos](@ref tutorial_table_of_content_chrono_pyengine) to learn how to use Chrono::PyEngine.
