# =============================================================================
# PROJECT CHRONO - http://projectchrono.org
#
# Copyright (c) 2025 projectchrono.org
# All rights reserved.
#
# Use of this source code is governed by a BSD-style license that can be found
# in the LICENSE file at the top level of the distribution and at
# http://projectchrono.org/license-chrono.txt.
# =============================================================================
#
# Schema for a Chrono YAML VEHICLE simulation specification file.
# The `chrono-version` must match the Chrono major and minor version numbers.
#
# =============================================================================

required: [chrono-version, type, model, solver]

chrono-version:
  type: string
  description: Chrono version compatible with this YAML specification (M.m or M.m.p)

# -----------------------------------------------------------------------------
# Definitions of common Chrono types

vector3d: &VECTOR3D   # Specification of a ChVector3d
    type: array
    items:
        type: number
    minItems: 3
    maxItems: 3

# -----------------------------------------------------------------------------
# Definition of a Chrono::Vehicle simulation

type:
  description: Type of Chrono simulation (must be VEHICLE)
  type: string
  value: VEHICLE

model:
  description: |
      Vehicle model specification YAML file.
      The path to the model file must be provided relative to the location of this simulation specification file.
      The model file must follow the vehicle_model.schema.
  type: string

solver:
  description: |
      Solver specification YAML file
      The path to the solver file must be provided relative to the location of this simulation specification file.
      The solver file must follow the mbs_solver.schema.
  type: string

simulation:
  description: Simulation settings
  type: object
  properties:
    end_time:
      type: number
      description: |
        Total simulation duration in seconds.
        The simulation will run from t=0 to t=end_time. A negative value indicates an infinite end time.
      minimum: 0
      default: -1
    enforce_realtime:
      type: boolean
      description: Whether to enforce real-time simulation.
      default: false
    gravity:
      type: array
      <<: *VECTOR3D
      description: Gravitational acceleration vector [x, y, z]
      default: [0, 0, -9.8]
    
output:
  description: Output settings
  type: object
  properties:
     type:
        type: string
        description: Output DB type
        enum: [NONE, ASCII, HDF5]
        default: NONE
     fps:
        type: number
        description: Output frequency
        minimum: 0

visualization:
  description: Visualization settings
  type: object
  properties:
      type:
          type: string
          description: Visualization type.
          enum: [MODEL_FILE, PRIMITIVES, COLLISION, NONE]
          default: MODEL_FILE
      render_fps:
          type: number
          description: Target frames per second for visualization.
          minimum: 0
          default: 120
      enable_shadows:
          type: boolean
          description: Whether to enable shadows in run-time visualization system
          default: true
      camera:
          type: object
          properties:
              vertical:
                  type: string
                  description: Vertical axis for camera orientation
                  enum: [Y, Z]
                  default: Z
              location:
                  <<: *VECTOR3D
                  description: Initial camera location
                  default: [0, -1, 0]
              target:
                  <<: *VECTOR3D
                  description: Initial camera look-at point
                  default: [0, 0, 0]
  